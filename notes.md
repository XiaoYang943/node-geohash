## GeoHash
### 是什么
- GeoHash是一种空间索引，它将地理位置编码为一个由字母和数字组成的字符串或一个纯数字整数。是一种降维的思想，将二维的数据转化为一维的数据
### 特点
- 每一个GeoHash字符串代表了某一矩形区域
  - 这个矩形区域内所有的点都共享相同的GeoHash字符串
### 什么用
#### 数据安全性
- 同一个矩形区域内的所有点的GeoHash值都相同，隐藏了实际的经纬度坐标
#### 缓存查询结果
- 场景：A区域内的多个用户不断发送位置信息请求其附近的数据点
- 暴力法：对每一次请求都对其进行缓冲区查询
  - 重复计算，性能浪费
- 解决
  - 由于这些用户的GeoHash字符串都是相同的，所以可以把该GeoHash当作key，把该区域的数据点当作value来进行缓存，进行共用(空间换时间)
- 存在问题
  - 单个GeoHash范围无法确保查询结果的正确性
    - .eg：该范围的用户A在左上角，用户B在右下角，他们的查询结果虽然一致，但是不符合正常情况(数据不完整)
  - 解决：不使用A和B的单个GeoHash范围，而是使用其父级八邻域GeoHash进行查询匹配
#### 最近邻查询
- 场景：计算离A位置最近的点
- 暴力法：遍历研究区所有点，分别与A点计算距离，记录最小值
  - 计算量太大，很多计算都是无用功
- 解决
  - 不计算所有点的距离，而是缩小范围，先求出A位置**相对比较近的点**，再在这些点中分别计算距离，记录最小值
  - 而这些**相对比较近的点**一定是与A点的GeoHash值相同
- 存在问题
  - 单个GeoHash范围存在**边界问题**
    - .eg: 
      - 点A和点B在同一个GeoHash范围内，点A在左上角，点B在右下角，点C在该GeoHash范围的"上方"的GeoHash范围的左下角
      - 此时点A的最近邻点为点C，而不是GeoHash值相同的点B
  - 解决：使用八邻域的GeoHash值进行查询匹配
#### 指定方向的最近邻查询
#### 八邻域查询
#### BBox查询